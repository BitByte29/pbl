<!DOCTYPE html>
<html>

<head>
    <title>Math Game</title>
    <style>
        *{
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            transition: all .3s ease;
        }
        body{
            background: url(./math.jpg);
            background-size: cover;
            background-repeat: no-repeat;
        }
        div,
        span {
            border-radius: 4px;
            box-shadow: 1px 3px 8px rgba(0, 0, 0, 0.2);
            text-shadow: 1px 3px 8px rgba(0, 0, 0, 0.2);
        }
        .center{
            height: 100vh;
            width: 100vw;
        }

        #scoreValue {
            background-color: white;
            color: black;
            padding: 2px;

        }

        #seconds {
            background-color: white;
            color: black;
            padding: 2px;
        }

        #score {
            border: 1px solid black;
            padding: 10px;
            position: absolute;
            top: 5%;
            left: 5%;
            background-color: rgb(80, 120, 220);
            color: white;
        }

        #time {
            border: 1px solid black;
            padding: 10px;
            position: absolute;
            top: 5%;
            right: 5%;
            background-color: rgb(200, 80, 120);
            color: white;
            display: none;
        }
        .qb{
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #question {
            border: 2px solid black;
            position: absolute;
            width: 90%;
            height: 30%;
            border-radius: 20px;
            top: 15%;
            background-color: rgb(14, 159, 255);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
        }

        #optionbox {
            box-shadow: 0 0 0 white;
            position: absolute;
            padding: 15px;
            top: 60%;
            width: 100%;
            display: flex;
            justify-content: space-around;
            /* margin: 0; */
            height: 10%;
        }

        .options {
            padding: 5px 10px 1rem 10px;
            border: 2px solid black;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.74);
            font-size: 1.5rem;
            width: 17%;
            height: 100%;
            text-align: center;
            /* display: inline-block; */
        }
        .options:hover{
            cursor: pointer;
            background-color: aliceblue;
            font-weight: 700;
        }

        #start {
            border: 1px solid black;
            font-size: 20px;
            position: absolute;
            padding: 10px 15px;
            bottom: 15%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgb(0, 76, 255);
            color: white;
        }
        #start:hover{
            background-color: green;
            cursor: pointer;
        }
        .inst{
            background-color: rgba(255, 238, 0, 0.596);
            position: absolute;
            bottom: 5%;
            left: 5%;
            font-size: 16px;
            box-shadow: none;
        }
    </style>
</head>

<body>
    <div class="center">
        <div class="inst">
            <ul style="font-size: 25px;">
                <li style="font-weight: 700;">Notes:</li>
                <li>After Clicking Start</li>
                <li>Questions and answer will appear</li>
                <li>Try to score maximum in one minute</li>
            </ul>
        </div>
        <div id="score">Score <span id="scoreValue">0</span></div>
        <div id="time">Time Remaining <span id="seconds">60</span></div>
        <div class="qb">
            <div id="question">Question will appear here</div></div>
        <div id="optionbox">
            <span id="opt1" class="options" onclick="checkAns(this)">Op1</span>
            <span id="opt2" class="options" onclick="checkAns(this)">Op2</span>
            <span id="opt3" class="options" onclick="checkAns(this)">Op3</span>
            <span id="opt4" class="options" onclick="checkAns(this)">Op4</span>
        </div>
        <div id="start" onclick="startGame()">Start Game</div>
    </div>
    <script>
        var playing = false;
        var score;
        var a, b;
        var correctAns;
        var action;
        var timeRemainingValue;
        var uniqueOpt;


        function makeUnique(arr) {
            var uniqueArray = [];
            arr.forEach(function (element) {
                if (uniqueArray.indexOf(element) === -1) {
                    uniqueArray.push(element);
                }
            })
            return uniqueArray;
        }

        function decTime() {
            timeRemainingValue--;

            document.getElementById("seconds").innerHTML = timeRemainingValue;
            if (timeRemainingValue < 1) {

                resetGame();
                window.alert("Your score is " + score);
            }

        }



        function startGame() {
            if (playing == false) {
                playing = true;
                score = 0;
                timeRemainingValue = 60;
                document.getElementById("time").style.display = "block"; document.getElementById("start").innerHTML = "Reset Game";
                showQueAns();

                action = setInterval(decTime, 1000);

            }
            else {
                resetGame();

            }
        }

        function resetGame() {
            playing = false;
            clearInterval(action);
            document.getElementById("time").style.display = "none"; document.getElementById("start").innerHTML = "Start Game";
            document.getElementById("question").innerHTML = "";
            document.getElementById("scoreValue").innerHTML = "0";
            document.getElementById("seconds").innerHTML = "0";

            document.getElementsByClassName("options")[0].innerHTML = "";
            document.getElementsByClassName("options")[1].innerHTML = "";
            document.getElementsByClassName("options")[2].innerHTML = "";
            document.getElementsByClassName("options")[3].innerHTML = "";
        }

        function showQueAns() {

            var queType = 1 + Math.floor(Math.random() * 6);

            if (queType == 1) {
                a = 1 + Math.floor(Math.random() * 49);
                b = 1 + Math.floor(Math.random() * 49);
                document.getElementById("question").innerHTML = a + " + " + b;
                correctAns = a + b;

                var wrongAnsRange = 99;
            }
            if (queType == 2) {
                a = 1 + Math.floor(Math.random() * 39);
                b = 1 + Math.floor(Math.random() * 39);
                var c = a + b; document.getElementById("question").innerHTML = c + " - " + b;
                correctAns = c - b;

                var wrongAnsRange = 79;
            }

            if (queType == 3) {
                a = 1 + Math.floor(Math.random() * 10);
                b = 1 + Math.floor(Math.random() * 10);
                document.getElementById("question").innerHTML = a + " x " + b;
                correctAns = a * b;

                var wrongAnsRange = 99;
            }
            if (queType == 4) {
                a = 1 + Math.floor(Math.random() * 14);
                b = 1 + Math.floor(Math.random() * 14);
                var c = a * b; document.getElementById("question").innerHTML = c + " / " + b;
                correctAns = c / b;

                var wrongAnsRange = 14;
            }
            if (queType == 5) {
                a = 1 + Math.floor(Math.random() * 14);
                document.getElementById("question").innerHTML = a + "<sup>2</sup>";
                correctAns = a * a;

                var wrongAnsRange = 224;
            }
            if (queType == 6) {
                a = 1 + Math.floor(Math.random() * 9);

                document.getElementById("question").innerHTML = a + "<sup>3</sup>";
                correctAns = a * a * a;

                var wrongAnsRange = 999;
            }
            var correctBox = 1 + Math.floor(Math.random() * 3);

            uniqueOpt = [];

            do {
                var wrongAns = 1 + Math.floor(Math.random() * wrongAnsRange);
                if (wrongAns != correctAns) {
                    uniqueOpt.push(wrongAns);
                }
                uniqueOpt = makeUnique(uniqueOpt);

            }
            while (uniqueOpt.length < 5);

            for (var i = 1; i < 5; i++) {


                if (i == correctBox) {
                    document.getElementById("opt" + i + "").innerHTML = correctAns;
                } else {
                    document.getElementById("opt" + i + "").innerHTML = uniqueOpt[i];
                }
            }
        }

        var let;
        function checkAns(x) {

            if (x.innerHTML == "" + correctAns + "") {
                x.style.backgroundColor = "rgba(50,255,50,0.3)";
                setTimeout(changeColor2, 400);
                let = x;
                score++;
                document.getElementById("scoreValue").innerHTML = score;
            }
            else {
                x.style.backgroundColor = "rgba(255,50,50,0.3)";
                score--;
                document.getElementById("scoreValue").innerHTML = score;
                setTimeout(changeColor, 400);
                let = x;
            }
        }

        function changeColor() {
            let.style.backgroundColor = "white";
        }

        function changeColor2() {
            let.style.backgroundColor = "white";
            showQueAns();
        }



    </script>


</body>

</html>